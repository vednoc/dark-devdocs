/* ==UserStyle==
@name         Dark DevDocs
@description  A customizable theme for DevDocs.
@namespace    github.com/vednoc/dark-devdocs
@author       vednoc
@version      0.1.0
@homepageURL  https://github.com/vednoc/dark-devdocs
@supportURL   https://github.com/vednoc/dark-devdocs/issues
@updateURL    https://gitlab.com/vednoc/dark-devdocs/raw/master/dd.user.styl
@preprocessor stylus

@var text b_radius "Custom border radius" 4px
@var text ui_font "Custom UI font" "'custom_font', -apple-system, BlinkMacSystemFont, 'San Francisco', 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', Arial, sans-serif"
@var text mono_font "Custom Mono font" "'custom_font', 'SFMono-Regular', 'Consolas', 'Liberation Mono', Menlo, Courier, monospace"

@var color dark    "Dark color.   " #222222
@var color darker  "Darker color. " #2f2f2f
@var color light   "Light color.  " #d1d1d1
@var color lighter "Lighter color." #c9c9c9
@var color icon    "Icon color.   " #e1e1e1
@var color accent  "Accent color. " #7289da
@var color yellow  "Yellow color. " #f0c674
@var color orange  "Orange color. " #de935f
@var color red     "Red color.    " #a54242
@var color magenta "Magenta color." #b294bb
@var color violet  "Violet color. " #85678f
@var color blue    "Blue color.   " #5f819d
@var color cyan    "Cyan color.   " #5e8d87
@var color green   "Green color.  " #8c9440
@var color white   "White color.  " #ffffff
@var color shadow  "Shadow color. " #00000020

==/UserStyle== */

@-moz-document domain('devdocs.io') {

    :root {
        --dark    : dark;
        --darker  : darker;
        --light   : light;
        --lighter : lighter;
        --accent  : accent;
        --shadow  : shadow;
        --yellow  : yellow;
        --orange  : orange;
        --red     : red;
        --magenta : magenta;
        --violet  : violet;
        --blue    : blue;
        --cyan    : cyan;
        --green   : green;
        --white   : white;
        --t       : transparent;

        --radius    : b_radius;
        --ui-font   : ui_font;
        --mono-font : mono_font;
    }

    // * Use stylus-lang variables with CSS variables.
    $dark    = var(--dark);
    $darker  = var(--darker);
    $light   = var(--light);
    $lighter = var(--lighter);
    $accent  = var(--accent);
    $shadow  = var(--shadow);
    $yellow  = var(--yellow);
    $orange  = var(--orange);
    $red     = var(--red);
    $magenta = var(--magenta);
    $violet  = var(--violet);
    $blue    = var(--blue);
    $cyan    = var(--cyan);
    $green   = var(--green);
    $white   = var(--white);
    $t       = var(--t);
    $r       = var(--radius);

    // * Mixins.
    radius() { border-radius: arguments }
    c(x, y = 0, z = 0, xi = 1, yi = 1, zi = 1) {
        if x is a 'call' {            color: xi is 0 ? x : x !important }
        if y is a 'call' {     border-color: yi is 0 ? y : y !important }
        if z is a 'call' { background-color: zi is 0 ? z : z !important }
    }

    // * Reset.
    body {
        c: $lighter 0 $dark;

        // * Feature -> Custom UI font.
        font-family: var(--ui-font);

        table {
            c: 0 $darker $dark;
            thead {
                tr th {
                    c: $light $darker $darker;
                }
            }
            tbody {
                tr th {
                    c: $light $darker $darker;
                }
                tr td { c: $lighter $darker $t }
                code { c: $light 0 $darker }
                a { c: $accent }
            }
        }

        pre {
            radius: $r;
            c: $light $darker $dark;
            box-shadow: 0 2px 4px 0 $shadow;

            // * Feature -> Custom Mono font.
            &, ../ code, samp { font-family: var(--mono-font) }

            &[data-language] {
                .comment, .punctuation { c: $lighter }
                .function { c: $red }
                .number { c: $violet }
                .operator, .entity, .url { c: $yellow }
                .atrule, .attr-value, .keyword { c: $blue }
                .property, .tag, .boolean, .constant, .symbol, .deleted { c: $orange }
                .selector, .attr-name, .string, .char, .builtin, .inserted { c: $green }
            }
        }
    }

    // * Sidebar -> Core.
    ._sidebar[tabindex='-1'] {
        c: $lighter $green $dark;

        ._list {
            box-shadow: inset -1px 0 $darker;

            &-item {
                c: 0 0 $t;
                &:hover { c : 0 0 $darker }

                ../ .focus, ../ .active {
                    c: $light 0 $darker;
                    box-shadow: inset -1px 0 $accent;
                }

                ._list-arrow {
                    fill: $light;
                    ../.open ._list-arrow { opacity: 1 }
                }
            }
        }
    }

}
